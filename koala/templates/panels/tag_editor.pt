
<!--! Tag editor -->
<div id="tag-editor" class="row inline" ng-app="TagEditor"
     ng-controller="TagEditorCtrl" ng-init="initTags('${tags_json}')">
    <div class="small-3 columns">
        <label class="right" i18n:translate="">Tags</label>
    </div>
    <div class="small-9 columns field">
        <div class="row tagentry inline controls-wrapper {{ tag.fresh }}"
             ng-repeat="tag in tagsArray | orderBy: 'name'" ng-cloak="cloak">
            <div class="small-5 columns">
                <input class="taginput key inline" placeholder="Key" value="{{ tag.name }}"
                       ng-keyup="updateTag($index, $event, 'name')" maxlength="127" pattern="tag_pattern" />
                <small class="error" i18n:translate="">Invalid tag</small>
            </div>
            <div class="small-5 columns">
                <input class="taginput value inline" placeholder="Value" value="{{ tag.value }}"
                       ng-keyup="updateTag($index, $event, 'value')" maxlength="255" pattern="tag_pattern" />
                <small class="error" i18n:translate="">Invalid tag</small>
            </div>
            <div class="small-2 columns">
                <a href="#" ng-click="removeTag($index)" class="circle has-tip"
                        title="Remove tag"><i class="fi-minus-circle"></i></a>
            </div>
        </div>
        <div class="row tagentry inline controls-wrapper">
            <div class="small-5 columns">
                <input class="taginput key" placeholder="key..." ng-model="newTagKey" pattern="tag_pattern" />
            </div>
            <div class="small-5 columns">
                <input class="taginput value" placeholder="value..." pattern="tag_pattern" />
            </div>
            <div class="small-2 columns">
                <a href="#" ng-click="addTag($event)"
                        class="circle has-tip" title="Add new tag row"><i class="fi-plus circle"></i></a>
            </div>
        </div>
        <div ng-cloak="cloak">
            <div id="tags-preview" class="small-10 columns" ng-show="tagsArray.length">
                <span ng-repeat="tag in tagsArray | orderBy: 'name'" ng-class="item.fresh">
                    {{ tag.name }}={{ tag.value }}<span ng-show="!$last">,&nbsp;</span>
                </span>
            </div>
        </div>
        <!--! Add class="debug" to textarea to view tags data posted by form -->
        <textarea id="tags" name="tags" class="hidden"></textarea>
    </div>
    <script src="${request.static_url('koala:static/js/pages/tageditor.js')}"></script>
</div>
