<metal:block use-macro="main_template" i18n:domain="eucaconsole">

<head metal:fill-slot="head_css">
    <link rel="stylesheet" type="text/css" href="${request.static_path('eucaconsole:static/css/pages/template_designer.css')}" />
</head>

<div metal:fill-slot="main_content">
    <div class="row" id="contentwrap" ng-app="TemplateDesigner" ng-controller="TemplateDesignerCtrl as designCtrl" ng-init="designCtrl.initController('${json_opts}', 'blah')"> 
        <metal:breadcrumbs metal:use-macro="layout.global_macros['breadcrumbs']">
            <metal:crumbs metal:fill-slot="crumbs">
                <li><a href="${request.route_path('stacks')}" i18n:translate="">Stacks</a></li>
                <li class="current"><a href="#" i18n:translate="">Template Designer</a></li>
            </metal:crumbs>
        </metal:breadcrumbs>
        <!-- Notifications -->
        <metal:block metal:use-macro="layout.global_macros['notifications']" />
        <h3 id="pagetitle">
            <strong i18n:translate="">Tempate Designer:</strong>
        </h3>
        <div class="large-2 columns">
            <div ng-repeat="(name, svc) in designCtrl.resources">
                <h6>{{ name }}</h6>
                <div ng-repeat="res in svc">
                    <a href="#" ng-drag="true" ng-drag-data="res" data-allow-transform="true" draggable="false">{{ res.name }}</a>
                </div>
            </div>
            <hr/>
            <a ng-click="designCtrl.undoLast()" ng-disabled="designCtrl.canUndo()">Undo</a>
        </div>
        <div class="large-10 columns">
            <div id="graph-area" ng-drop="true" ng-drop-success="designCtrl.dropComplete($data, $event)">
                <svg/>
            </div>
        </div>
        <ul id="designer-action-menu" class="f-dropdown" data-dropdown-content="">
            <li><a i18n:translate="">Properties</a></li>
            <li><a i18n:translate="">Copy</a></li>
        </ul>
    </div>
</div>

<div metal:fill-slot="tail_js">
    <script src="${request.static_path('eucaconsole:static/js/thirdparty/d3/d3.min.js')}"></script>
    <script src="${request.static_path('eucaconsole:static/js/thirdparty/webcola/cola.js')}"></script>
    <script src="${request.static_path('eucaconsole:static/js/thirdparty/angular/ngDraggable.js')}"></script>
    <script src="${request.static_path('eucaconsole:static/js/pages/template_designer.js')}"></script>
</div>

</metal:block>


